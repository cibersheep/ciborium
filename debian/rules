#!/usr/bin/make -f
# -*- makefile -*-

export DH_OPTIONS
export DH_GOPKG := launchpad.net/ciborium

DEB_HOST_ARCH := $(shell dpkg-architecture -qDEB_HOST_ARCH)

%:
	dh $@ \
		--buildsystem=golang \
		--with=golang \
		--fail-missing

override_dh_auto_install:
	dh_auto_install -O--buildsystem=golang
	mkdir -p ${CURDIR}/debian/ciborium/usr/lib/ciborium
	mv \
		${CURDIR}/debian/ciborium/usr/bin/ciborium \
		${CURDIR}/debian/ciborium/usr/lib/ciborium
	# all our libs are private
	rm -r \
		${CURDIR}/debian/ciborium/usr/share/gocode
	rmdir \
		${CURDIR}/debian/ciborium/usr/bin

override_dh_strip:
	echo "Skipping strip (LP: #1318027)"
